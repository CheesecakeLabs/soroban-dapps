import { Meta, Story, Canvas, ArgsTable } from '@storybook/addon-docs/blocks'
import { useForm } from './index'
import * as yup from 'yup'


<Meta title="Organisms/Form" component={Form} argTypes={{
  onSubmit: { action: 'submitted' },
  onInputChange: { action: 'inputChange' },
  onInputBlur: { action: 'inputBlur' },
}} />

export const Template = (args) => {
  const validationSchema = yup.object().shape({
    name: yup.string().required(),
  })
  const { Form } = useForm({...args, validationSchema})
  return (
    <Form>
      <Form.InputText name="name" label="Name" />
      <Form.Select name="city" label="City" options={[{
        label: 'FlorianÃ³polis',
        value: 'floripa'
      }]} />
      <hr />
      <input type="submit" value="Submit" />
    </Form>
  )
}

# Form
The proposal of `Form` component is help to build forms, and handle the form state

The `Form` component was implemented using [React hook form](https://react-hook-form.com/)

The form clones every `<Form.*>` component and injects the props that are necessary for react-hook-form.
Components with children that do not belong to `<Form.*>` will just be rendered normally.
> The motivation to not interact with all component tree to inject the form props, is to avoid performance issues in form rerender.

The form handles:
- Inputs state and form submit
- Form validation state and pass it to the `LabeledInput`
- Form field population

<Canvas>
  <Story
    name="default"
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Supported inputs
The form has the following supported inputs

### `Form.InputText`

The classic input text, with props:

<ArgsTable of={Form.InputText} />

### `Form.Select`

A select input, with props:

<ArgsTable of={Form.Select} />



